<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>仿真评估工具</title>
    <style>
      .title {
        height: 25px;
        background-color: #4472c4;
        color: white;
        text-align: center;
        line-height: 25px;
      }
      .logo{
        width:60px;height: 50px;
      }
      .heart{
        width:18px;height: 16px;
        vertical-align: top;
      }
      .input{
        width:120px;
        border: 1px;
        text-align: right;
        line-height: 20px;
        padding-right:5px;
      }
      table{
        width:100%;
      }
      table td{
        border: solid 1px;
        collapse: 0px;
        border-spacing: 0px;
        width: 50%;
        padding:1px 3px 1px 3px;
        text-align: center;
        background-color: white;
        font-size: small;
      }
    </style>
  </head>
  <body style="width: 900px;background-color: #f2f2f2;">
    <div style="background-color: #f2f2f2;width:100%;height: 100%;padding:0px 5px 0px 5px;">
      <div style="text-align: center;vertical-align: middle;">
        <span style="font-weight: bold;line-height: 25px;">室内外联合覆盖方案仿真评估工具</span>
      </div>
      <div>
        <div style="width:55%;height:520px;display:inline-block;background-color: #d9d9d9;vertical-align: top;">
<!--          左-->
          <div class="title">仿真结果</div>
          <div style="padding:0px 5px 0px 5px;">
            <div style="text-align: right;">
              <button style="width:100px;height:35px;background-color: #FF8E1E;color: white;" id="btn_reset">重置</button>
              <button style="width:100px;height:35px;background-color: #438046;color: white;" id="btn_evaluation">开始计算</button>
            </div>
            <div>
              <span>RSRP (dBm)</span>
              <table border="0" cellspacing="0" cellpadding="0">
                <tr>
                  <td>[-Infinity,-115)</td>
                  <td>
                    <span><input type="text" class="input" id="input_a_0">%</span>
                  </td>
                </tr>
                <tr>
                  <td>[-115,-110)</td>
                  <td>
                    <span><input type="text" class="input" id="input_a_1">%</span>
                  </td>
                </tr>
                <tr>
                  <td>[-110,-105)</td>
                  <td>
                    <span><input type="text" class="input" id="input_a_2">%</span>
                  </td>
                </tr>
                <tr>
                  <td>[-105,-100)</td>
                  <td><span><input type="text" class="input" id="input_a_3">%</span></td>
                </tr>
                <tr>
                  <td>[-100,-95)</td>
                  <td><span><input type="text" class="input" id="input_a_4">%</span></td>
                </tr>
                <tr>
                  <td>[-95,-85)</td>
                  <td><span><input type="text" class="input" id="input_a_5">%</span></td>
                </tr>
                <tr>
                  <td>[-85,-75)</td>
                  <td><span><input type="text" class="input" id="input_a_6">%</span></td>
                </tr>
                <tr>
                  <td>[-75,0)</td>
                  <td><span><input type="text" class="input" id="input_a_7">%</span></td>
                </tr>
                <tr>
                  <td>[0,Infinity)</td>
                  <td><span><input type="text" class="input" id="input_a_8">%</span></td>
                </tr>
              </table>
            </div>
            <div>
              <span>RS-SINR (dB)</span>
              <table border="0" cellspacing="0" cellpadding="0">
                <tr>
                  <td>1</td>
                  <td><span><input type="text" class="input" id="input_b_1">%</span></td>
                </tr>
                <tr>
                  <td>2</td>
                  <td><input type="text" class="input" id="input_b_2">%</span></td>
                </tr>
                <tr>
                  <td>3</td>
                  <td><input type="text" class="input" id="input_b_3">%</span></td>
                </tr>
                <tr>
                  <td>4</td>
                  <td><input type="text" class="input" id="input_b_4">%</span></td>
                </tr>
                <tr>
                  <td>5</td>
                  <td><input type="text" class="input" id="input_b_5">%</span></td>
                </tr>
                <tr>
                  <td>6</td>
                  <td><input type="text" class="input" id="input_b_6">%</span></td>
                </tr>
                <tr>
                  <td>7</td>
                  <td><input type="text" class="input" id="input_b_7">%</span></td>
                </tr>
                <tr>
                  <td>8</td>
                  <td><input type="text" class="input" id="input_b_8">%</span></td>
                </tr>
                <tr>
                  <td>9</td>
                  <td><input type="text" class="input" id="input_b_9">%</span></td>
                </tr>
              </table>
            </div>
            <div>
              <span>室外10米处:</span>
              <table border="0" cellspacing="0" cellpadding="0">
                <tr>
                  <td>RSRP（dBm）</td>
                  <td><input type="text" class="input" id="input_c">%</span></td>
                </tr>
                <tr>
                  <td>室外第一导频的RSRP（dBm）</td>
                  <td><input type="text" class="input" id="input_d">%</span></td>
                </tr>
                <tr>
                  <td>室内小区外泄的RSRP（dBm）</td>
                  <td><input type="text" class="input" id="input_e">%</span></td>
                </tr>
              </table>
            </div>

          </div>
        </div>
        <div style="width:43%;height:520px;display:inline-block;background-color: #d9d9d9;vertical-align: top;">
<!--          右-->
          <div class="title">评估结果</div>
          <div style="padding: 30px 5px 0px 25px;height: 250px;">
            <div id="div_cmcc">
              <div style="display: inline-block;width:30%;">
                <img src="./resource/image/cmcc.png" class="logo">
              </div>
              <div style="display: inline-block;width:60%;vertical-align: middle;line-height: 54px;" id="div_cmcc_heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
              </div>
            </div>
            <div id="div_cu">
              <div style="display: inline-block;width:30%;">
                <img src="./resource/image/cu.png" class="logo">
              </div>
              <div style="display: inline-block;width:60%;line-height: 54px;" id="div_cu_heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
              </div>
            </div>
            <div id="div_ct">
              <div style="display: inline-block;width:30%;">
                <img src="./resource/image/ct.png" class="logo">
              </div>
              <div style="display: inline-block;line-height: 54px;width:60%;" id="div_ct_heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
                <img src="./resource/image/heart-empty.png" class="heart">
              </div>
            </div>
          </div>
          <div style="height: 180px;background-color: white;">
            <div>评估结果:</div>
            <div id="div_result">自动生成</div>
          </div>
        </div>

      </div>
    </div>
    <!-- You can also require other files to run in this process -->
    <script src="./renderer.js"></script>
    <script src="./resource/jquery.min.js"></script>
    <script type="text/javascript">
      $().ready(function () {
        $("#btn_reset").click(function () {
          $("input").val("");
        });
        let starCountMap={"cmcc":0,"cu":0,"ct":0};
        $("#btn_evaluation").click(function () {
          /*
          A RSRP (dBm)
          0:[-Infinity,-115)
          1:[-115,-110)
          2:[-110,-105)
          3:[-105,-100)
          4:[-100,-95)
          5:[-95,-85)
          6:[-85,-75)
          7:[-75,0)
          8:[0,Infinity)
          */

          //计算A ≥ -115 的总数
          const sumAGte115=sumInput("input_a_",1);
          const sumAGte110=sumInput("input_a_",2);
          const sumAGte105=sumInput("input_a_",3);
          const sumAGte100=sumInput("input_a_",4);
          const sumAGte95=sumInput("input_a_",5);

          const sumBGte9=sumInput("input_b_",9);
          const sumBGte6=sumInput("input_b_",6);
          const sumBGte5=sumInput("input_b_",5);
          const sumBGte4=sumInput("input_b_",4);
          const sumBGte3=sumInput("input_b_",3);
          const sumBGte2=sumInput("input_b_",2);
          const sumBGte1=sumInput("input_b_",1);

          const c=getValue($("#input_c"));
          const d=getValue($("#input_d"));
          const e=getValue($("#input_e"));

          resetStars();
          resetResult();

          //移动
          if(sumAGte95 >=99 && sumBGte9>=99){
            let count;
            //3星
            if(c<=-110 || d-e>=10){
              //满足外泄指标+2星
              count=5;
            }else{
              count=0;
            }
            showStars("cmcc",count);
            showResult("cmcc",0);
          }else if(sumAGte105 >=99 && sumBGte6>=99){
            let count;
            //2星
            if(c<=-110 || d-e>=10){
              //满足外泄指标+2星
              count=4;
            }else{
              count=0;
            }
            showStars("cmcc",count);
            showResult("cmcc",1);
          } else{
            showResult("cmcc",2);
          }

          //联通
          if(sumAGte100>=90 && sumBGte6 >=90){
            //3星
            if(c<=-110 || d-e>=10){
              showStars("cu",5);
            }else{
              showStars("cu",0);
            }
            showResult("cu",0);
          }else if(sumAGte100>=90 && sumBGte5 >=90){
            //3星
            if(c<=-110 || d-e>=10){
              showStars("cu",5);
            }else{
              showStars("cu",0);
            }
            showResult("cu",1);
          }else if(sumAGte105>=90 && sumBGte4 >=90){
            //2星
            if(c<=-110 || d-e>=10){
              showStars("cu",4);
            }else{
              showStars("cu",0);
            }
            showResult("cu",2);
          }else if(sumAGte105>=90 && sumBGte3 >=90){
            //2星
            if(c<=-110 || d-e>=10){
              showStars("cu",4);
            }else{
              showStars("cu",0);
            }
            showResult("cu",3);
          }else if(sumAGte110>=90 && sumBGte2 >=90){
            //1星
            if(c<=-110 || d-e>=10){
              showStars("cu",3);
            }else{
              showStars("cu",0);
            }
            showResult("cu",4);
          }else if(sumAGte110>=90 && sumBGte1 >=90){
            //1星
            if(c<=-110 || d-e>=10){
              showStars("cu",3);
            }else{
              showStars("cu",0);
            }
            showResult("cu",5);
          }else{
            showResult("cu",6);
          }

          //电信


          //外泄指标
          if(c<=-110 || d-e>=10){
            showResult("leak",0);
          }else{
            showResult("leak",1);
          }



        });

        function sumInput(prefix,startLevel) {
          let sum = 0;
          for (let i = startLevel; i <= 9; i++) {
            let input = $("#"+prefix + i+"");
            // console.log(input.id);
            sum += parseFloat(getValue(input));
          }
          return sum;
        }

        function getValue(input) {
          if (!!input && !!input.val()) {
            return input.val();
          } else {
            return 0;
          }
        }

        function resetStars() {
          starCountMap={"cmcc":0,"cu":0,"ct":0}
          $("img.heart").attr("src","./resource/image/heart-empty.png");
        }

        function showStars(operator,count) {
          let images=$("#div_"+operator+"_heart img");
          for(let i=0;i<count;i++){
            images[i].src="./resource/image/heart-red.png";
          }
        }

        function resetResult() {
          $("#div_result").html("");
        }
        function showResult(operator, index) {
            $("#div_result").append(results[operator][index]+"<br/>");
        }

        const results={
          "cmcc":["覆盖指标满足中国移动重点场景要求。","覆盖指标仅满足中国移动一般场景要求。","覆盖指标不满足中国移动要求。"],
          "cu":["覆盖指标满足中国联通双通道高标准要求。","覆盖指标满足中国联通单通道高标准要求。","覆盖指标仅满足中国联通双通道一般标准要求。","覆盖指标仅满足中国联通单通道一般标准要求。","覆盖指标仅满足中国联通双通道低标准要求。","覆盖指标仅满足中国联通单通道低标准要求。","覆盖指标不满足中国联通要求。"],
          "ct":["覆盖指标满足中国电信要求。","覆盖指标不满足中国电信要求。","覆盖指标不满足中国移动要求。"],
          "leak":["外泄指标满足要求。","外泄指标不满足要求。"]
        };

        /**
         * 获取评估结果
         * @param operator
         * @param index
         * @returns {*}
         */
        function getResult(operator, index) {
          return results[operator][index];
        }
      });
    </script>
  </body>
</html>
